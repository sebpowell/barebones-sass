@for $i from 1 through settings(layout, columns)
	@each $key, $value in settings(breakpoints)
		.gallery-#{$i}-#{$key}
			+no-bullet
			+clearfix
			+respond-above($key)
				margin-left: -(settings(layout, gutter))
				margin-right: -(settings(layout, gutter))

			@if $i < 1
				margin-left: 0
				margin-right: 0

			.gallery-item
				width: 100%
				margin-bottom: settings(layout, gutter)
				&:last-child
					margin-bottom: 0

				+respond-below($key)
					&:nth-child(#{$i}n + 1)
						// Clears floats after a row is complete for variable height elements.
						// This doesn't work if multiple classes are set (e.g. 2-device-small and 3-device-medium)
						clear: both


				+respond-above($key)
					width: 100% / $i !important
					float: left
					padding: 0 settings(layout, gutter) !important
					// &:nth-last-of-type(-n+#{$i})
					// 	margin-bottom: 0



// @mixin gallery-item($columns, $device: "device-medium")

// 	margin-bottom: $gutterWidth
// 	&:last-child
// 		margin-bottom: 0

// 	@include respond-above($device)
// 		float: left
// 		width: ($columnWidth * $columns) + ($gutterWidth * ($columns - 1))
// 		margin-right: $gutterWidth

// 		$nth-child: $columns - 1

// 		&:nth-last-child(-n+ #{$nth-child})
// 			margin-bottom: 0

// 		&:nth-child(3n + 1)
// 			clear: both

// 		&:nth-child(#{$nth-child}n)
// 			margin-right: 0